import streamlit as st

DATA_FILE = "votes.txt"

# Ø¯ÙˆØ§Ù„ ØªØ­Ù…ÙŠÙ„ ÙˆØ­ÙØ¸ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙˆÙ…ÙŠ
def load_national_ids():
    try:
        with open(DATA_FILE, "r", encoding="utf-8") as f:
            return set(line.strip() for line in f.readlines())
    except FileNotFoundError:
        return set()

def save_national_id(national_id):
    with open(DATA_FILE, "a", encoding="utf-8") as f:
        f.write(national_id + "\n")

# Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØµÙØ­Ø©
st.title("Ù†Ø¸Ø§Ù… Ø§Ù„ØªØµÙˆÙŠØª Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ")
st.markdown("### Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ ÙˆØ§Ù„ØªØµÙˆÙŠØª Ù„Ù„Ù…Ø±Ø´Ø­")

# Ù…Ø¯Ø®Ù„Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
national_id = st.text_input("Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙˆÙ…ÙŠ")
image_name = st.text_input("Ø§Ø³Ù… ØµÙˆØ±Ø© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©")
candidate = st.radio("Ø§Ø®ØªØ± Ø§Ù„Ù…Ø±Ø´Ø­", ["Ø£Ø­Ù…Ø¯", "Ù…Ø­Ù…ÙˆØ¯", "Ù…Ù†Ù‰"])

# Ø²Ø± Ø§Ù„ØªØµÙˆÙŠØª
if st.button("ØªØµÙˆÙŠØª"):
    error = ""
    success = ""

    if national_id.strip() == "" or image_name.strip() == "":
        error = "Ù…Ù† ÙØ¶Ù„Ùƒ Ø§Ù…Ù„Ø£ ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"
        st.error(error)
    else:
        national_ids = load_national_ids()
        if national_id in national_ids:
            error = "Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙˆÙ…ÙŠ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ âŒ"
            st.error(error)
        else:
            save_national_id(national_id)
            success = "ØªÙ… Ø§Ù„ØªØµÙˆÙŠØª Ø¨Ù†Ø¬Ø§Ø­ âœ… Ø´ÙƒØ±Ø§Ù‹ Ù„Ù…Ø´Ø§Ø±ÙƒØªÙƒ ğŸ¤"
            st.success(success)
